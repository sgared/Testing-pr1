<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Admin Dashboard â€“ Mont Clay Tech Co.</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="css/style.admin.css" rel="stylesheet" />
  </head>
  <body>
    <!-- ================= LOGIN SECTION ================= -->
    <section id="loginSection" class="login-section">
      <div class="login-card">
        <h1 class="login-title">Admin Login</h1>
        <form id="loginForm" class="login-form">
          <div class="form-group">
            <label for="loginEmail" class="form-label">Email</label>
            <input type="email" id="loginEmail" class="form-input" required />
          </div>
          <div class="form-group">
            <label for="loginPassword" class="form-label">Password</label>
            <input
              type="password"
              id="loginPassword"
              class="form-input"
              required
            />
          </div>
          <button type="submit" class="login-button">Login</button>
          <div id="loginError" class="login-error"></div>
        </form>
      </div>
    </section>

    <!-- ================= DASHBOARD SECTION ================= -->
    <section id="dashboardSection" class="dashboard-section hidden">
      <!-- Header -->
      <header class="admin-header">
        <div class="admin-header-left">
          <h1 class="admin-title">Admin Dashboard</h1>
        </div>
        <div class="admin-header-right">
          <span id="adminUserEmail" class="admin-user-email"></span>
          <button id="logoutBtn" class="logout-button">Logout</button>
        </div>
      </header>

      <!-- Navigation -->
      <nav class="admin-nav">
        <button class="nav-btn" data-section="overview">Overview</button>
        <button class="nav-btn" data-section="requests">Requests</button>
        <button class="nav-btn" data-section="customers">Customers</button>
      </nav>

      <!-- Overview Section -->
      <section id="overview-section" class="admin-section">
        <h2>Overview</h2>
        <div class="stats-grid">
          <div class="stat-card clickable" data-filter="all">
            <div class="stat-count" id="totalRequestsCount">0</div>
            <div class="stat-title">Total Requests</div>
          </div>
          <div class="stat-card clickable" data-filter="new">
            <div class="stat-count" id="pendingRequestsCount">0</div>
            <div class="stat-title">Pending</div>
          </div>
          <div class="stat-card clickable" data-filter="scheduled">
            <div class="stat-count" id="scheduledRequestsCount">0</div>
            <div class="stat-title">Scheduled</div>
          </div>
          <div class="stat-card clickable" data-filter="completed">
            <div class="stat-count" id="completedRequestsCount">0</div>
            <div class="stat-title">Completed</div>
          </div>
        </div>
      </section>

      <!-- Requests Section -->
      <section id="requests-section" class="admin-section">
        <h2 id="requestsSectionTitle">All Requests</h2>

        <div class="filters-bar">
          <select id="statusFilter" class="filter-select">
            <option value="">All Status</option>
            <option value="new">New</option>
            <option value="scheduled">Scheduled</option>
            <option value="completed">Completed</option>
          </select>
          <select id="priorityFilter" class="filter-select">
            <option value="">All Priority</option>
            <option value="low">Low</option>
            <option value="medium">Medium</option>
            <option value="high">High</option>
          </select>
          <input type="date" id="dateFilter" class="filter-date" />
          <input
            type="text"
            id="searchInput"
            class="filter-search"
            placeholder="Search..."
          />
        </div>

        <table class="requests-table">
          <thead>
            <tr>
              <th class="sortable" data-sort="submitted">Submitted</th>
              <th class="sortable" data-sort="name">Name</th>
              <th>Contact</th>
              <th>Services</th>
              <th class="sortable" data-sort="status">Status</th>
              <th>Priority</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody id="requestsTableBody"></tbody>
        </table>
        <div id="emptyState" class="empty-state">No requests found.</div>
      </section>

      <!-- Customers Section -->
      <section id="customer-section" class="admin-section">
        <h2>Customers</h2>
        <div id="customersList" class="customers-list"></div>
      </section>
    </section>

    <!-- Loading spinner -->
    <div id="loadingSpinner" class="loading-spinner hidden">Loading...</div>

    <!-- Notifications -->
    <div id="notificationContainer" class="notification-container"></div>

    <!-- Firebase config first -->
    <script type="module" src="js/firebaseConfig.js"></script>

    <!-- Auth gate: shows login OR reveals dashboard, then emits 'admin:ready' -->
    <script type="module" src="js/auth.js"></script>

    <!-- Your existing UI shell / tabs / buttons -->
    <script type="module" src="js/main.admin.js"></script>

    <!-- Firestore data + actions: starts after 'admin:ready' -->
    <script type="module" src="js/admin.js"></script>
  </body>
</html>
